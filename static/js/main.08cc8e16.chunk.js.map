{"version":3,"sources":["stores/RouterStore.ts","components/common/globalStyle.ts","components/common/Header.tsx","components/support/ModalSupport.tsx","api/firebase.ts","api/support.ts","components/support/SupportStore.ts","components/support/Support.tsx","views/IndexView.tsx","components/requests/RequestFilters.tsx","components/requests/RequestEditModal.tsx","components/requests/Requests.tsx","components/requests/RequestsStore.ts","views/RequestsView.tsx","components/chartRequests/ChartRequestsHeader.tsx","components/chartRequests/ChartRequests.tsx","components/chartRequests/ChartRequestsStore.ts","views/OpenRequestCharts.tsx","views/ClosedRequestCharts.tsx","Routes.tsx","index.tsx"],"names":["routerStore","RouterStore","GlobalStyle","createGlobalStyle","StyledHeader","styled","div","StyledHeaderContent","Header","to","ModalSupport","observer","store","isOpenedModal","isValid","isLoading","onSubmit","closeModal","setIsValid","Form","useForm","form","onChangeForm","validateFields","then","catch","useEffect","resetFields","title","visible","onOk","data","getFieldsValue","confirmLoading","okButtonProps","disabled","onCancel","name","layout","style","width","initialValues","remember","Item","label","rules","required","message","onChange","Password","TextArea","db","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getFirestore","createRequest","params","a","addDoc","collection","id","uuidv4","status","createdAt","Date","docRef","updateRequest","q","query","where","getDocs","requestDocs","requestRef","docs","ref","updateDoc","closedAt","getRequests","requestsRef","conditions","orderBy","fromCreatedAt","push","toCreatedAt","search","requests","forEach","doc","q1","q2","docRef1","docRef2","concat","SupportStore","openModal","makeAutoObservable","this","CenteredContainer","SupportForm","onClick","Page","IndexView","RangePicker","DatePicker","Option","Select","RequestsFilters","clearFilters","onChangeStatusFilter","onChangeSearchFilter","onChangeCreatedAtFilter","extra","type","gutter","span","Text","Search","marginTop","onSearch","showTime","placeholder","value","RequestEditModal","changeRequestStatus","currRequest","okText","cancelText","phone","text","RequestsTable","columns","dataIndex","ellipsis","render","moment","seconds","format","key","_","record","overlay","domEvent","stopPropagation","placement","loading","dataSource","toJS","rowKey","pagination","showSizeChanger","RequestsStore","requestId","filters","load","console","info","fieldValue","formatString","find","request","RequestsView","RequestsHeader","onChangeGrouping","groupBy","Container","RequestsChart","formattedRequests","xField","yField","slider","start","end","group","length","minDate","maxDate","subtract","slice","diff","dates","i","date","add","count","filter","item","OpenRequestsView","ClosedRequestsView","path","component","exact","OpenRequests","ClosedRequests","enableLogging","undefined","browserHistory","createBrowserHistory","basename","history","syncHistoryWithStore","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.08cc8e16.chunk.js","sourcesContent":["import { RouterStore } from 'mobx-react-router';\n\nexport const routerStore = new RouterStore();\n","import { createGlobalStyle } from \"styled-components\";\n\nexport const font300 = `\"font300\", \"Arial\" !important;`;\nexport const font500 = `\"font500\", \"Arial\" !important;`;\nexport const font700 = `\"font700\", \"Arial\" !important;`;\nexport const font900 = `\"font900\", \"Arial\" !important;`;\n\nexport const GlobalStyle = createGlobalStyle`\n  * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n      font-family: \"font500\", \"Arial\";\n    }\n\n  @font-face {\n    font-family: 'font300';\n    src: url('fonts/MuseoSansCyrl-300.woff2');\n  }\n\n  @font-face {\n    font-family: 'font500';\n    src: url('fonts/MuseoSansCyrl-500.woff2');\n  }\n\n  @font-face {\n    font-family: 'font700';\n    src: url('fonts/MuseoSansCyrl-700.woff2');\n  }\n\n  @font-face {\n    font-family: 'font900';\n    src: url('fonts/MuseoSansCyrl-900.woff2');\n  }\n`;\n","import React, { FC } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\n\nconst StyledHeader = styled.div`\n  position: fixed;\n  top: 0px;\n  height: 40px;\n  width: 100%;\n  background: #fff;\n  box-shadow: 0px 1px 0px 0 rgba(175, 196, 208, 0.47);\n  z-index: 1000;\n`;\n\nconst StyledHeaderContent = styled.div`\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  max-width: 1000px;\n  margin: 10px auto 0px;\n`;\n\nexport const Header: FC = () => {\n  return (\n    <StyledHeader>\n      <StyledHeaderContent>\n        <Link to=\"/\">Создать обращение</Link>\n        <Link to=\"/requests\">Посмотреть все обращения</Link>\n        <Link to=\"/open-requests\">Диаграмма по открытым заявкам</Link>\n        <Link to=\"/closed-requests\">Диаграмма по закрытым заявкам</Link>\n      </StyledHeaderContent>\n    </StyledHeader>\n  );\n};\n","import React, { FC, useEffect } from \"react\";\nimport { Form, Input, Modal } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { SupportStore } from \"components/support/SupportStore\";\n\ninterface IProps {\n  store: SupportStore;\n}\n\nexport const ModalSupport: FC<IProps> = observer(({ store }) => {\n  const {\n    isOpenedModal,\n    isValid,\n    isLoading,\n    onSubmit,\n    closeModal,\n    setIsValid,\n  } = store;\n  const [form] = Form.useForm();\n\n  const onChangeForm = () => {\n    form\n      .validateFields()\n      .then(() => setIsValid(true))\n      .catch(() => setIsValid(false));\n  };\n\n  const onCancel = () => {\n    form.resetFields();\n\n    closeModal();\n  };\n\n  const onOk = () => {\n    const data = form.getFieldsValue();\n\n    onSubmit(data);\n  };\n\n  useEffect(() => {\n    if (isOpenedModal) {\n      form.resetFields();\n    }\n  }, [isOpenedModal]);\n\n  return (\n    <Modal\n      title=\"Создание обращение в службу поддержки\"\n      visible={isOpenedModal}\n      onOk={onOk}\n      confirmLoading={isLoading}\n      okButtonProps={{\n        disabled: !isValid,\n      }}\n      onCancel={onCancel}\n    >\n      <Form\n        name=\"basic\"\n        form={form}\n        layout=\"vertical\"\n        style={{\n          width: \"100%\",\n        }}\n        initialValues={{ remember: true }}\n      >\n        <Form.Item\n          label=\"Имя\"\n          name=\"name\"\n          rules={[{ required: true, message: \"Введите ваше имя\" }]}\n        >\n          <Input onChange={onChangeForm} />\n        </Form.Item>\n\n        <Form.Item\n          label=\"Номер телефона\"\n          name=\"phone\"\n          rules={[{ required: true, message: \"Введите номер телефона\" }]}\n        >\n          <Input.Password onChange={onChangeForm} />\n        </Form.Item>\n\n        <Form.Item\n          label=\"Текст обращения\"\n          name=\"text\"\n          rules={[{ required: true, message: \"Введите ваше обращение\" }]}\n        >\n          <Input.TextArea onChange={onChangeForm} />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n});\n","import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseApp = initializeApp({\n  apiKey: \"AIzaSyC0fMeML71Pj5GyW9ZTjNL9uJWPBLTejk8\",\n  authDomain: \"sql-academy-285317.firebaseapp.com\",\n  projectId: \"sql-academy-285317\",\n  storageBucket: \"sql-academy-285317.appspot.com\",\n  messagingSenderId: \"635181414452\",\n  appId: \"1:635181414452:web:36fe38c206cf51ad143261\",\n});\n\nexport const db = getFirestore();\n","import { v4 as uuidv4 } from \"uuid\";\nimport {\n  collection,\n  query,\n  where,\n  addDoc,\n  getDocs,\n  orderBy,\n  updateDoc,\n} from \"firebase/firestore\";\n\nimport { db } from \"api/firebase\";\n\nexport interface IRequestCreateParams {\n  name: string;\n  phone: string;\n  text: string;\n}\n\nexport interface IRequestFetchParams {\n  fromCreatedAt?: Date;\n  toCreatedAt?: Date;\n  status?: string;\n  search?: string;\n}\n\nexport const createRequest = async (params: IRequestCreateParams) => {\n  const docRef = await addDoc(collection(db, \"requests\"), {\n    ...params,\n    id: uuidv4(),\n    status: \"created\",\n    createdAt: new Date(),\n  });\n\n  return docRef;\n};\n\nexport const updateRequest = async (id: string) => {\n  const q = query(collection(db, \"requests\"), where(\"id\", \"==\", id));\n  const requestDocs = await getDocs(q);\n  const requestRef = requestDocs.docs[0].ref;\n\n  await updateDoc(requestRef, {\n    status: \"closed\",\n    closedAt: new Date(),\n  });\n};\n\n// Используется firebase\n// вся нижеописанная логика подстраиваться под его api и обходит его ограничения\nexport const getRequests = async (params: IRequestFetchParams) => {\n  const requestsRef = collection(db, \"requests\");\n  const conditions = [orderBy(\"createdAt\", \"desc\")];\n\n  if (params.fromCreatedAt) {\n    conditions.push(where(\"createdAt\", \">=\", params.fromCreatedAt));\n  }\n\n  if (params.toCreatedAt) {\n    conditions.push(where(\"createdAt\", \"<=\", params.toCreatedAt));\n  }\n\n  if (params.status) {\n    conditions.push(where(\"status\", \"==\", params.status));\n  }\n\n  if (!params.search) {\n    const requests: any[] = [];\n    const q = query(requestsRef, ...conditions);\n    const docRef = await getDocs(q);\n    docRef.forEach((doc) => requests.push(doc.data()));\n\n    return requests;\n  } else {\n    const requests: any[] = [];\n    const q1 = query(\n      requestsRef,\n      ...conditions,\n      where(\"phone\", \"==\", params.search)\n    );\n    const q2 = query(\n      requestsRef,\n      ...conditions,\n      where(\"id\", \"==\", params.search)\n    );\n\n    const docRef1 = await getDocs(q1);\n    const docRef2 = await getDocs(q2);\n\n    const docRef = docRef1.docs.concat(docRef2.docs);\n    docRef.forEach((doc) => requests.push(doc.data()));\n\n    return requests;\n  }\n};\n","import { makeAutoObservable } from \"mobx\";\n\nimport { createRequest, IRequestCreateParams } from \"api/support\";\n\nexport class SupportStore {\n  isOpenedModal: boolean = false;\n  isValid: boolean = false;\n  isLoading: boolean = false;\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  setIsValid = (isValid: boolean) => {\n    this.isValid = isValid;\n  };\n\n  openModal = () => {\n    this.isOpenedModal = true;\n  };\n\n  closeModal = () => {\n    this.isOpenedModal = false;\n  };\n\n  onSubmit = async (data: IRequestCreateParams) => {\n    this.isLoading = true;\n\n    try {\n      await createRequest(data);\n\n      this.closeModal();\n    } catch (error) {\n    } finally {\n      this.isLoading = false;\n    }\n  };\n}\n","import React, { FC } from \"react\";\nimport styled from \"styled-components\";\nimport { Button } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { ModalSupport } from \"components/support/ModalSupport\";\nimport { SupportStore } from \"components/support/SupportStore\";\n\nconst CenteredContainer = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nexport const SupportForm: FC = observer(() => {\n  const store: SupportStore = new SupportStore();\n  const { openModal } = store;\n  return (\n    <CenteredContainer>\n      <Button onClick={openModal}>\n        Отправить обращение в службу поддержки\n      </Button>\n      <ModalSupport store={store} />\n    </CenteredContainer>\n  );\n});\n","import React, { FC } from \"react\";\nimport styled from \"styled-components\";\n\nimport { Header } from \"components/common/Header\";\nimport { SupportForm } from \"components/support/Support\";\n\nconst Page = styled.div`\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  background: #f5f5f5;\n`;\n\nconst IndexView: FC = () => {\n  return (\n    <Page>\n      <Header />\n      <SupportForm />\n    </Page>\n  );\n};\n\nexport default IndexView;\n","import React, { FC } from \"react\";\nimport {\n  Form,\n  Card,\n  Button,\n  Col,\n  Typography,\n  Select,\n  DatePicker,\n  Row,\n  Input,\n} from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { RequestsStore } from \"components/requests/RequestsStore\";\n\ninterface IProps {\n  store: RequestsStore;\n}\n\nconst { RangePicker } = DatePicker;\nconst { Option } = Select;\n\nexport const RequestsFilters: FC<IProps> = observer(({ store }) => {\n  const {\n    clearFilters,\n    onChangeStatusFilter,\n    onChangeSearchFilter,\n    onChangeCreatedAtFilter,\n  } = store;\n  const [form] = Form.useForm();\n\n  const onClearFilters = () => {\n    form.resetFields();\n\n    clearFilters();\n  };\n\n  return (\n    <Card\n      title={\"Фильтры\"}\n      extra={\n        <Button type=\"link\" onClick={onClearFilters}>\n          Очистить фильтры\n        </Button>\n      }\n    >\n      <Form form={form}>\n        <Row gutter={32}>\n          <Col span={8}>\n            <Typography.Text>Поиск по ID и номеру</Typography.Text>\n\n            <Input.Search\n              style={{\n                width: \"100%\",\n                marginTop: 10,\n              }}\n              onSearch={onChangeSearchFilter}\n            />\n          </Col>\n          <Col span={8}>\n            <Typography.Text>Дата создания</Typography.Text>\n            <RangePicker\n              showTime\n              onChange={onChangeCreatedAtFilter}\n              style={{\n                width: \"100%\",\n                marginTop: 10,\n              }}\n            />\n          </Col>\n          <Col span={8}>\n            <Form.Item\n              name=\"status\"\n              rules={[{ required: true, message: \"Введите ваше имя\" }]}\n            >\n              <Typography.Text>Статус</Typography.Text>\n              <Select\n                onChange={onChangeStatusFilter}\n                placeholder={\"Статус заявки\"}\n                style={{\n                  width: \"100%\",\n                  marginTop: 10,\n                }}\n              >\n                <Option value={\"created\"} key={\"created\"}>\n                  Новое\n                </Option>\n                <Option value={\"closed\"} key={\"closed\"}>\n                  Завершено\n                </Option>\n              </Select>\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Card>\n  );\n});\n","import React, { FC, useEffect } from \"react\";\nimport { Form, Input, Modal } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { RequestsStore } from \"components/requests/RequestsStore\";\n\ninterface IProps {\n  store: RequestsStore;\n}\n\nexport const RequestEditModal: FC<IProps> = observer(({ store }) => {\n  const {\n    isOpenedModal,\n    isLoading,\n    changeRequestStatus,\n    closeModal,\n    currRequest,\n  } = store;\n  const [form] = Form.useForm();\n\n  const onOk = () => {\n    changeRequestStatus();\n  };\n\n  useEffect(() => {\n    if (isOpenedModal) {\n      form.resetFields();\n    }\n  }, [isOpenedModal]);\n\n  return (\n    <Modal\n      title=\"Редактировать обращение\"\n      visible={isOpenedModal}\n      onOk={onOk}\n      okText={\"Завершить обращение\"}\n      cancelText={\"Отмена\"}\n      okButtonProps={{\n        disabled: currRequest?.status === \"closed\",\n      }}\n      confirmLoading={isLoading}\n      onCancel={closeModal}\n    >\n      <Form\n        name=\"basic\"\n        form={form}\n        layout=\"vertical\"\n        style={{\n          width: \"100%\",\n        }}\n        initialValues={{\n          name: currRequest?.name || \"\",\n          phone: currRequest?.phone || \"\",\n          text: currRequest?.text || \"\",\n        }}\n      >\n        <Form.Item label=\"Имя\" name=\"name\">\n          <Input disabled />\n        </Form.Item>\n\n        <Form.Item label=\"Номер телефона\" name=\"phone\">\n          <Input disabled />\n        </Form.Item>\n\n        <Form.Item label=\"Текст обращения\" name=\"text\">\n          <Input.TextArea disabled />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n});\n","import React, { FC } from \"react\";\nimport styled from \"styled-components\";\nimport { Table, Space, Dropdown, Menu, Button } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { IRequest, RequestsStore } from \"components/requests/RequestsStore\";\nimport { RequestsFilters } from \"components/requests/RequestFilters\";\nimport { RequestEditModal } from \"components/requests/RequestEditModal\";\nimport { toJS } from \"mobx\";\nimport moment from \"moment\";\n\nconst CenteredContainer = styled.div`\n  position: relative;\n  width: 1200px;\n  padding: 70px 0px;\n  left: 50%;\n  transform: translateX(-50%);\n`;\n\ninterface IProps {\n  store: RequestsStore;\n}\n\nexport const RequestsTable: FC<IProps> = observer(({ store }) => {\n  const { isLoading, requests, openModal } = store;\n\n  const columns = [\n    {\n      title: \"ID обращения\",\n      dataIndex: \"id\",\n      width: \"15%\",\n    },\n    {\n      title: \"Пользователь\",\n      dataIndex: \"name\",\n      ellipsis: true,\n    },\n    {\n      title: \"Номер телефона\",\n      dataIndex: \"phone\",\n      width: \"15%\",\n    },\n    {\n      title: \"Статус\",\n      dataIndex: \"status\",\n      width: \"15%\",\n      render: (status: string) =>\n        status === \"created\" ? \"Новое\" : \"Завершено\",\n    },\n    {\n      title: \"Дата создания\",\n      dataIndex: \"createdAt\",\n      width: \"16%\",\n      render: (data: any) =>\n        moment(data.seconds * 1000).format(\"MMM DD YYYY HH:mm:ss\"),\n    },\n    {\n      title: \"Дата закрытия\",\n      dataIndex: \"closedAt\",\n      width: \"16%\",\n      render: (data: any) =>\n        data && moment(data.seconds * 1000).format(\"MMM DD YYYY HH:mm:ss\"),\n    },\n    {\n      key: \"actions\",\n      width: \"10%\",\n      ellipsis: true,\n      render: (_: any, record: IRequest) => (\n        <Dropdown\n          overlay={\n            <Menu\n              onClick={({ domEvent }) => {\n                domEvent.stopPropagation();\n              }}\n            >\n              <Menu.Item onClick={() => openModal(record.id)}>\n                Редактировать\n              </Menu.Item>\n            </Menu>\n          }\n          placement=\"bottomLeft\"\n        >\n          <Button type=\"text\">...</Button>\n        </Dropdown>\n      ),\n    },\n  ];\n\n  return (\n    <CenteredContainer>\n      <RequestsFilters store={store} />\n      <RequestEditModal store={store} />\n      <Space>\n        <Table\n          loading={isLoading}\n          dataSource={toJS(requests)}\n          columns={columns}\n          rowKey=\"id\"\n          pagination={{\n            showSizeChanger: true,\n          }}\n        />\n      </Space>\n    </CenteredContainer>\n  );\n});\n","import { makeAutoObservable, toJS } from \"mobx\";\n\nimport { getRequests, IRequestFetchParams, updateRequest } from \"api/support\";\n\nexport interface IRequest {\n  id: string;\n  name: string;\n  phone: string;\n  text: string;\n  status: string;\n  createdAt: Date;\n}\n\nexport class RequestsStore {\n  isLoading: boolean = false;\n  isOpenedModal: boolean = false;\n\n  requestId: string = \"\";\n  requests: IRequest[] = [];\n  filters: IRequestFetchParams = {};\n\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  get currRequest() {\n    return this.requests.find((request) => request.id === this.requestId);\n  }\n\n  load = async () => {\n    this.isLoading = true;\n\n    try {\n      this.requests = await getRequests(this.filters);\n    } catch (error) {\n      console.info(error);\n    } finally {\n      this.isLoading = false;\n    }\n  };\n\n  clearFilters = () => {\n    this.filters = {};\n\n    this.load();\n  };\n\n  onChangeStatusFilter = (fieldValue: string) => {\n    this.filters = {\n      ...toJS(this.filters),\n      status: fieldValue,\n    };\n\n    this.load();\n  };\n\n  onChangeSearchFilter = (value: string) => {\n    this.filters = {\n      ...toJS(this.filters),\n      search: value,\n    };\n\n    this.load();\n  };\n\n  onChangeCreatedAtFilter = (a: any, formatString: [string, string]) => {\n    this.filters = {\n      ...toJS(this.filters),\n      fromCreatedAt: new Date(formatString[0]),\n      toCreatedAt: new Date(formatString[1]),\n    };\n\n    this.load();\n  };\n\n  openModal = (requestId: string) => {\n    this.isOpenedModal = true;\n    this.requestId = requestId;\n  };\n\n  closeModal = () => {\n    this.isOpenedModal = false;\n    this.requestId = \"\";\n  };\n\n  changeRequestStatus = async () => {\n    this.isLoading = true;\n\n    try {\n      await updateRequest(this.requestId);\n\n      this.closeModal();\n      this.load();\n    } catch (error) {\n    } finally {\n      this.isLoading = false;\n    }\n  };\n}\n","import React, { FC, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { observer } from \"mobx-react\";\n\nimport { Header } from \"components/common/Header\";\nimport { RequestsTable } from \"components/requests/Requests\";\nimport { RequestsStore } from \"components/requests/RequestsStore\";\n\nconst Page = styled.div`\n  position: relative;\n  min-height: 100vh;\n  height: 100%;\n  background: #f5f5f5;\n`;\n\nconst RequestsView: FC = observer(() => {\n  const store: RequestsStore = new RequestsStore();\n  const { load } = store;\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  return (\n    <Page>\n      <Header />\n      <RequestsTable store={store} />\n    </Page>\n  );\n});\n\nexport default RequestsView;\n","import React, { FC } from \"react\";\nimport { Form, Card, Col, Typography, Select, Row } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { RequestsStore } from \"components/chartRequests/ChartRequestsStore\";\n\ninterface IProps {\n  store: RequestsStore;\n}\n\nconst { Option } = Select;\n\nexport const RequestsHeader: FC<IProps> = observer(({ store }) => {\n  const { onChangeGrouping, groupBy } = store;\n  const [form] = Form.useForm();\n\n  return (\n    <Card title={\"Диаграмма заявок\"}>\n      <Form form={form}>\n        <Row gutter={32}>\n          <Col span={8}>\n            <Form.Item name=\"status\">\n              <Typography.Text>Группировать по</Typography.Text>\n              <Select\n                value={groupBy}\n                onChange={onChangeGrouping}\n                style={{\n                  width: \"100%\",\n                  marginTop: 10,\n                }}\n              >\n                <Option value={\"seconds\"} key={\"seconds\"}>\n                  Секунда (данные за последние 30 минут)\n                </Option>\n                <Option value={\"minutes\"} key={\"minutes\"}>\n                  Минута (данные за последние сутки)\n                </Option>\n                <Option value={\"hours\"} key={\"hours\"}>\n                  Час\n                </Option>\n                <Option value={\"days\"} key={\"days\"}>\n                  Сутки\n                </Option>\n              </Select>\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Card>\n  );\n});\n","import React, { FC } from \"react\";\nimport styled from \"styled-components\";\nimport { Space } from \"antd\";\nimport { observer } from \"mobx-react\";\nimport { Line } from \"@ant-design/charts\";\nimport { toJS } from \"mobx\";\n\nimport { RequestsStore } from \"components/chartRequests/ChartRequestsStore\";\nimport { RequestsHeader } from \"components/chartRequests/ChartRequestsHeader\";\n\nconst CenteredContainer = styled.div`\n  position: relative;\n  width: 1200px;\n  padding: 70px 0px;\n  left: 50%;\n  transform: translateX(-50%);\n`;\n\nconst Container = styled.div`\n  background: #fff;\n  padding: 20px;\n  margin-top: 20px;\n`;\n\ninterface IProps {\n  store: RequestsStore;\n}\n\nexport const RequestsChart: FC<IProps> = observer(({ store }) => {\n  const { isLoading, formattedRequests } = store;\n\n  return (\n    <CenteredContainer>\n      <RequestsHeader store={store} />\n      <Space>\n        <Container>\n          <Line\n            data={toJS(formattedRequests)}\n            xField={\"date\"}\n            yField={\"value\"}\n            slider={{\n              start: 0,\n              end: 1,\n            }}\n            width={1160}\n            loading={isLoading}\n          />\n        </Container>\n      </Space>\n    </CenteredContainer>\n  );\n});\n","import { makeAutoObservable } from \"mobx\";\nimport moment from \"moment\";\n\nimport { getRequests } from \"api/support\";\n\nexport interface IRequest {\n  name: string;\n  phone: string;\n  text: string;\n  status: string;\n  createdAt: {\n    seconds: number;\n  };\n  closedAt: {\n    seconds: number;\n  };\n}\n\nexport class RequestsStore {\n  isLoading: boolean = false;\n  requests: IRequest[] = [];\n\n  status: string = \"created\";\n  groupBy: string = \"hours\";\n\n  constructor(status: string) {\n    this.status = status;\n\n    makeAutoObservable(this);\n  }\n\n  get formattedRequests() {\n    if (this.requests.length === 0) return [];\n\n    const maxDate = new Date();\n    let minDate;\n\n    if (this.groupBy === \"seconds\") {\n      minDate = moment(maxDate).subtract(30, \"minutes\");\n    } else if (this.groupBy === \"minutes\") {\n      minDate = moment(maxDate).subtract(1, \"days\");\n    } else {\n      const request = this.requests.slice(-1)[0]\n\n      minDate =\n        this.status === \"created\"\n          ? moment(new Date(request.createdAt.seconds * 1000))\n          : moment(new Date(request.closedAt.seconds * 1000));\n    }\n\n    const diff =\n      moment(maxDate).diff(moment(minDate), this.groupBy as any) || 2;\n\n    let format = \"MMM DD YYYY\";\n    if (this.groupBy === \"hours\") format = \"MMM DD YYYY HH\";\n    if (this.groupBy === \"minutes\") format = \"MMM DD YYYY HH:mm\";\n    if (this.groupBy === \"seconds\") format = \"MMM DD YYYY HH:mm:ss\";\n\n    const dates = [];\n\n    for (let i = 0; i < diff; i++) {\n      const date = moment(minDate)\n        .add(i, this.groupBy as any)\n        .format(format);\n\n      const count = this.requests.filter((item) => {\n        const itemDate =\n          this.status === \"created\"\n            ? moment(new Date(item.createdAt.seconds * 1000)).format(format)\n            : moment(new Date(item.closedAt.seconds * 1000)).format(format);\n\n        return itemDate === date;\n      });\n\n      dates.push({\n        date,\n        value: count.length,\n      });\n    }\n\n    return dates;\n  }\n\n  onChangeGrouping = (group: string) => {\n    this.groupBy = group;\n  };\n\n  load = async () => {\n    this.isLoading = true;\n\n    try {\n      this.requests = await getRequests({ status: this.status });\n    } catch (error) {\n      console.info(error);\n    } finally {\n      this.isLoading = false;\n    }\n  };\n}\n","import React, { FC, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { observer } from \"mobx-react\";\n\nimport { Header } from \"components/common/Header\";\nimport { RequestsChart } from \"components/chartRequests/ChartRequests\";\nimport { RequestsStore } from \"components/chartRequests/ChartRequestsStore\";\n\nconst Page = styled.div`\n  position: relative;\n  min-height: 100vh;\n  height: 100%;\n  background: #f5f5f5;\n`;\n\nconst OpenRequestsView: FC = observer(() => {\n  const store: RequestsStore = new RequestsStore(\"created\");\n  const { load } = store;\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  return (\n    <Page>\n      <Header />\n      <RequestsChart store={store} />\n    </Page>\n  );\n});\n\nexport default OpenRequestsView;\n","import React, { FC, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { observer } from \"mobx-react\";\n\nimport { Header } from \"components/common/Header\";\nimport { RequestsChart } from \"components/chartRequests/ChartRequests\";\nimport { RequestsStore } from \"components/chartRequests/ChartRequestsStore\";\n\nconst Page = styled.div`\n  position: relative;\n  min-height: 100vh;\n  height: 100%;\n  background: #f5f5f5;\n`;\n\nconst ClosedRequestsView: FC = observer(() => {\n  const store: RequestsStore = new RequestsStore(\"closed\");\n  const { load } = store;\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  return (\n    <Page>\n      <Header />\n      <RequestsChart store={store} />\n    </Page>\n  );\n});\n\nexport default ClosedRequestsView;\n","import { observer } from \"mobx-react\";\nimport React, { FC } from \"react\";\nimport { HashRouter, Route } from \"react-router-dom\";\n\nimport IndexView from \"views/IndexView\";\nimport RequestsView from \"views/RequestsView\";\nimport OpenRequests from \"views/OpenRequestCharts\";\nimport ClosedRequests from \"views/ClosedRequestCharts\";\n\nconst Routes: FC = () => {\n  return (\n    <HashRouter>\n      <Route path=\"/\" component={IndexView} exact />\n      <Route path=\"/requests\" component={RequestsView} />\n      <Route path=\"/open-requests\" component={OpenRequests} />\n      <Route path=\"/closed-requests\" component={ClosedRequests} />\n    </HashRouter>\n    \n  );\n};\n\nexport default observer(Routes);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Router } from \"react-router\";\nimport { enableLogging } from \"mobx-logger\";\nimport { createBrowserHistory } from \"history\";\nimport { syncHistoryWithStore } from \"mobx-react-router\";\n\nimport { routerStore } from \"stores/RouterStore\";\nimport { GlobalStyle } from \"components/common/globalStyle\";\n\nimport Routes from \"Routes\";\n\nimport \"antd/dist/antd.css\";\n\n// MobX\nenableLogging(undefined);\n\n// history\nconst browserHistory = createBrowserHistory({ basename: \"/\" });\nconst history = syncHistoryWithStore(browserHistory, routerStore);\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyle></GlobalStyle>\n    <Router history={history}>\n      <Routes />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}