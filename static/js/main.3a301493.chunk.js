(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{947:function(e,t,n){"use strict";n.r(t);var a,s,r,c,i,o,d,u,j,l,b,h=n(0),f=n.n(h),O=n(73),p=n.n(O),x=n(87),g=n(575),m=n(122),v=n(345),w=new v.RouterStore,y=n(92),C=n(93),k=Object(C.a)(a||(a=Object(y.a)(["\n  * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n      font-family: \"font500\", \"Arial\";\n    }\n\n  @font-face {\n    font-family: 'font300';\n    src: url('fonts/MuseoSansCyrl-300.woff2');\n  }\n\n  @font-face {\n    font-family: 'font500';\n    src: url('fonts/MuseoSansCyrl-500.woff2');\n  }\n\n  @font-face {\n    font-family: 'font700';\n    src: url('fonts/MuseoSansCyrl-700.woff2');\n  }\n\n  @font-face {\n    font-family: 'font900';\n    src: url('fonts/MuseoSansCyrl-900.woff2');\n  }\n"]))),M=n(91),q=n(213),S=n(29),A=C.b.div(s||(s=Object(y.a)(["\n  position: fixed;\n  top: 0px;\n  height: 40px;\n  width: 100%;\n  background: #fff;\n  box-shadow: 0px 1px 0px 0 rgba(175, 196, 208, 0.47);\n  z-index: 1000;\n"]))),I=C.b.div(r||(r=Object(y.a)(["\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  max-width: 1000px;\n  margin: 10px auto 0px;\n"]))),D=function(){return Object(S.jsx)(A,{children:Object(S.jsxs)(I,{children:[Object(S.jsx)(q.b,{to:"/",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"}),Object(S.jsx)(q.b,{to:"/requests",children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(S.jsx)(q.b,{to:"/open-requests",children:"\u0414\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0437\u0430\u044f\u0432\u043a\u0430\u043c"}),Object(S.jsx)(q.b,{to:"/closed-requests",children:"\u0414\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u043e \u0437\u0430\u043a\u0440\u044b\u0442\u044b\u043c \u0437\u0430\u044f\u0432\u043a\u0430\u043c"})]})})},F=n(107),L=n(96),Y=n(956),B=n(958),T=n(959),J=Object(M.a)((function(e){var t=e.store,n=t.isOpenedModal,a=t.isValid,s=t.isLoading,r=t.onSubmit,c=t.closeModal,i=t.setIsValid,o=Y.a.useForm(),d=Object(L.a)(o,1)[0],u=function(){d.validateFields().then((function(){return i(!0)})).catch((function(){return i(!1)}))};return n?Object(S.jsx)(B.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438",visible:n,onOk:function(){var e=d.getFieldsValue();r(e)},confirmLoading:s,okButtonProps:{disabled:!a},onCancel:function(){d.resetFields(),c()},children:Object(S.jsxs)(Y.a,{name:"basic",form:d,layout:"vertical",style:{width:"100%"},initialValues:{remember:!0},children:[Object(S.jsx)(Y.a.Item,{label:"\u0418\u043c\u044f",name:"name",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"}],children:Object(S.jsx)(T.a,{onChange:u})}),Object(S.jsx)(Y.a.Item,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",name:"phone",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}],children:Object(S.jsx)(T.a.Password,{onChange:u})}),Object(S.jsx)(Y.a.Item,{label:"\u0422\u0435\u043a\u0441\u0442 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",name:"text",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"}],children:Object(S.jsx)(T.a.TextArea,{onChange:u})})]})}):null})),H=n(11),V=n.n(H),E=n(21),P=n(12),z=n(57),R=n(164),G=n(960),W=n(103),K=n(580),X=(Object(K.a)({apiKey:"AIzaSyC0fMeML71Pj5GyW9ZTjNL9uJWPBLTejk8",authDomain:"sql-academy-285317.firebaseapp.com",projectId:"sql-academy-285317",storageBucket:"sql-academy-285317.appspot.com",messagingSenderId:"635181414452",appId:"1:635181414452:web:36fe38c206cf51ad143261"}),Object(W.d)()),N=function(){var e=Object(E.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.a)(Object(W.b)(X,"requests"),Object(R.a)(Object(R.a)({},t),{},{id:Object(G.a)(),status:"created",createdAt:new Date}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(E.a)(V.a.mark((function e(t){var n,a,s,r,c,i,o,d,u;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(W.b)(X,"requests"),a=[Object(W.e)("createdAt","desc")],t.fromCreatedAt&&a.push(Object(W.g)("createdAt",">=",t.fromCreatedAt)),t.toCreatedAt&&a.push(Object(W.g)("createdAt","<=",t.toCreatedAt)),t.status&&a.push(Object(W.g)("status","==",t.status)),t.search){e.next=15;break}return s=[],r=W.f.apply(void 0,[n].concat(a)),e.next=10,Object(W.c)(r);case 10:return e.sent.forEach((function(e){return s.push(e.data())})),e.abrupt("return",s);case 15:return c=[],i=W.f.apply(void 0,[n].concat(a,[Object(W.g)("phone","==",t.search)])),o=W.f.apply(void 0,[n].concat(a,[Object(W.g)("id","==",t.search)])),e.next=20,Object(W.c)(i);case 20:return d=e.sent,e.next=23,Object(W.c)(o);case 23:return u=e.sent,d.docs.concat(u.docs).forEach((function(e){return c.push(e.data())})),e.abrupt("return",c);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function e(){var t=this;Object(P.a)(this,e),this.isOpenedModal=!1,this.isValid=!1,this.isLoading=!1,this.setIsValid=function(e){t.isValid=e},this.openModal=function(){t.isOpenedModal=!0},this.closeModal=function(){t.isOpenedModal=!1},this.onSubmit=function(){var e=Object(E.a)(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,N(n);case 4:t.closeModal(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,t.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,7,9,12]])})));return function(t){return e.apply(this,arguments)}}(),Object(z.makeAutoObservable)(this)},U=C.b.div(c||(c=Object(y.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),$=Object(M.a)((function(){var e=new Q,t=e.openModal;return Object(S.jsxs)(U,{children:[Object(S.jsx)(F.a,{onClick:t,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"}),Object(S.jsx)(J,{store:e})]})})),_=C.b.div(i||(i=Object(y.a)(["\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  background: #f5f5f5;\n"]))),ee=function(){return Object(S.jsxs)(_,{children:[Object(S.jsx)(D,{}),Object(S.jsx)($,{})]})},te=n(961),ne=n(953),ae=n(954),se=n(281),re=n(955),ce=n(251),ie=n(151),oe=n(957),de=ae.a.RangePicker,ue=se.a.Option,je=Object(M.a)((function(e){var t=e.store,n=t.clearFilters,a=t.onChangeStatusFilter,s=t.onChangeSearchFilter,r=t.onChangeCreatedAtFilter,c=Y.a.useForm(),i=Object(L.a)(c,1)[0];return Object(S.jsx)(re.a,{title:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b",extra:Object(S.jsx)(F.a,{type:"link",onClick:function(){i.resetFields(),n()},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"}),children:Object(S.jsx)(Y.a,{form:i,children:Object(S.jsxs)(ce.a,{gutter:32,children:[Object(S.jsxs)(ie.a,{span:8,children:[Object(S.jsx)(oe.a.Text,{children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e ID \u0438 \u043d\u043e\u043c\u0435\u0440\u0443"}),Object(S.jsx)(T.a.Search,{style:{width:"100%",marginTop:10},onSearch:s})]}),Object(S.jsxs)(ie.a,{span:8,children:[Object(S.jsx)(oe.a.Text,{children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"}),Object(S.jsx)(de,{showTime:!0,onChange:r,style:{width:"100%",marginTop:10}})]}),Object(S.jsx)(ie.a,{span:8,children:Object(S.jsxs)(Y.a.Item,{name:"status",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"}],children:[Object(S.jsx)(oe.a.Text,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(S.jsxs)(se.a,{onChange:a,placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u044f\u0432\u043a\u0438",style:{width:"100%",marginTop:10},children:[Object(S.jsx)(ue,{value:"created",children:"Created"},"created"),Object(S.jsx)(ue,{value:"closed",children:"Closed"},"closed")]})]})})]})})})})),le=C.b.div(o||(o=Object(y.a)(["\n  position: relative;\n  width: 1200px;\n  padding: 70px 0px;\n  left: 50%;\n  transform: translateX(-50%);\n"]))),be=Object(M.a)((function(e){var t=e.store,n=t.isLoading,a=t.requests,s=[{title:"ID \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",dataIndex:"id",width:"20%"},{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",dataIndex:"name",ellipsis:!0},{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phone",width:"15%"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"status",width:"15%"},{title:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",dataIndex:"createdAt",width:"25%",render:function(e){return String(new Date(1e3*e.seconds))}}];return Object(S.jsxs)(le,{children:[Object(S.jsx)(je,{store:t}),Object(S.jsx)(te.b,{children:Object(S.jsx)(ne.a,{loading:n,dataSource:Object(z.toJS)(a),columns:s,rowKey:"id",pagination:{showSizeChanger:!0}})})]})})),he=function e(){var t=this;Object(P.a)(this,e),this.isLoading=!1,this.requests=[],this.filters={},this.load=Object(E.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,Z(t.filters);case 4:t.requests=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.info(e.t0);case 10:return e.prev=10,t.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])}))),this.clearFilters=function(){t.filters={},t.load()},this.onChangeStatusFilter=function(e){t.filters=Object(R.a)(Object(R.a)({},Object(z.toJS)(t.filters)),{},{status:e}),t.load()},this.onChangeSearchFilter=function(e){t.filters=Object(R.a)(Object(R.a)({},Object(z.toJS)(t.filters)),{},{search:e}),t.load()},this.onChangeCreatedAtFilter=function(e,n){t.filters=Object(R.a)(Object(R.a)({},Object(z.toJS)(t.filters)),{},{fromCreatedAt:new Date(n[0]),toCreatedAt:new Date(n[1])}),t.load()},Object(z.makeAutoObservable)(this)},fe=C.b.div(d||(d=Object(y.a)(["\n  position: relative;\n  min-height: 100vh;\n  height: 100%;\n  background: #f5f5f5;\n"]))),Oe=Object(M.a)((function(){var e=new he,t=e.load;return Object(h.useEffect)((function(){t()}),[t]),Object(S.jsxs)(fe,{children:[Object(S.jsx)(D,{}),Object(S.jsx)(be,{store:e})]})})),pe=n(592),xe=se.a.Option,ge=Object(M.a)((function(e){var t=e.store,n=t.onChangeGrouping,a=t.groupBy,s=Y.a.useForm(),r=Object(L.a)(s,1)[0];return Object(S.jsx)(re.a,{title:"\u0413\u0440\u0430\u0444\u0438\u043a \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u0437\u0430\u044f\u0432\u043e\u043a",children:Object(S.jsx)(Y.a,{form:r,children:Object(S.jsx)(ce.a,{gutter:32,children:Object(S.jsx)(ie.a,{span:8,children:Object(S.jsxs)(Y.a.Item,{name:"status",children:[Object(S.jsx)(oe.a.Text,{children:"\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e"}),Object(S.jsxs)(se.a,{value:a,onChange:n,style:{width:"100%",marginTop:10},children:[Object(S.jsx)(xe,{value:"seconds",children:"\u0421\u0435\u043a\u0443\u043d\u0434\u0430 (\u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 30 \u043c\u0438\u043d\u0443\u0442)"},"seconds"),Object(S.jsx)(xe,{value:"minutes",children:"\u041c\u0438\u043d\u0443\u0442\u0430 (\u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0441\u0443\u0442\u043a\u0438)"},"minutes"),Object(S.jsx)(xe,{value:"hours",children:"\u0427\u0430\u0441"},"hours"),Object(S.jsx)(xe,{value:"days",children:"\u0421\u0443\u0442\u043a\u0438"},"days")]})]})})})})})})),me=C.b.div(u||(u=Object(y.a)(["\n  position: relative;\n  width: 1200px;\n  padding: 70px 0px;\n  left: 50%;\n  transform: translateX(-50%);\n"]))),ve=C.b.div(j||(j=Object(y.a)(["\n  background: #fff;\n  padding: 20px;\n  margin-top: 20px;\n"]))),we=Object(M.a)((function(e){var t=e.store,n=t.isLoading,a=t.formattedRequests;return Object(S.jsxs)(me,{children:[Object(S.jsx)(ge,{store:t}),Object(S.jsx)(te.b,{children:Object(S.jsx)(ve,{children:Object(S.jsx)(pe.a,{data:Object(z.toJS)(a),xField:"date",yField:"value",slider:{start:0,end:1},width:1160,loading:n})})})]})})),ye=n(14),Ce=n(114),ke=n.n(Ce),Me=function(){function e(t){var n=this;Object(P.a)(this,e),this.isLoading=!1,this.requests=[],this.status="created",this.groupBy="hours",this.onChangeGrouping=function(e){n.groupBy=e},this.load=Object(E.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isLoading=!0,e.prev=1,e.next=4,Z({status:n.status});case 4:n.requests=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.info(e.t0);case 10:return e.prev=10,n.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])}))),this.status=t,Object(z.makeAutoObservable)(this)}return Object(ye.a)(e,[{key:"formattedRequests",get:function(){var e=this;if(0===this.requests.length)return[];var t,n=new Date;t="seconds"===this.groupBy?ke()(n).subtract(30,"minutes"):"minutes"===this.groupBy?ke()(n).subtract(1,"days"):new Date(1e3*this.requests.slice(-1)[0].createdAt.seconds);var a=ke()(n).diff(ke()(t),this.groupBy)||2,s="MMM DD YYYY";"hours"===this.groupBy&&(s="MMM DD YYYY HH"),"minutes"===this.groupBy&&(s="MMM DD YYYY HH:mm"),"seconds"===this.groupBy&&(s="MMM DD YYYY HH:mm:ss");for(var r=[],c=function(n){var a=ke()(t).add(n,e.groupBy).format(s),c=e.requests.filter((function(e){return ke()(new Date(1e3*e.createdAt.seconds)).format(s)===a}));r.push({date:a,value:c.length})},i=0;i<a;i++)c(i);return r}}]),e}(),qe=C.b.div(l||(l=Object(y.a)(["\n  position: relative;\n  min-height: 100vh;\n  height: 100%;\n  background: #f5f5f5;\n"]))),Se=Object(M.a)((function(){var e=new Me("created"),t=e.load;return Object(h.useEffect)((function(){t()}),[t]),Object(S.jsxs)(qe,{children:[Object(S.jsx)(D,{}),Object(S.jsx)(we,{store:e})]})})),Ae=C.b.div(b||(b=Object(y.a)(["\n  position: relative;\n  min-height: 100vh;\n  height: 100%;\n  background: #f5f5f5;\n"]))),Ie=Object(M.a)((function(){var e=new Me("closed"),t=e.load;return Object(h.useEffect)((function(){t()}),[t]),Object(S.jsxs)(Ae,{children:[Object(S.jsx)(D,{}),Object(S.jsx)(we,{store:e})]})})),De=Object(M.a)((function(){return Object(S.jsxs)(q.a,{children:[Object(S.jsx)(x.a,{path:"/",component:ee,exact:!0}),Object(S.jsx)(x.a,{path:"/requests",component:Oe}),Object(S.jsx)(x.a,{path:"/open-requests",component:Se}),Object(S.jsx)(x.a,{path:"/closed-requests",component:Ie})]})}));n(946);Object(g.enableLogging)(void 0);var Fe=Object(m.a)({basename:"/"}),Le=Object(v.syncHistoryWithStore)(Fe,w);p.a.render(Object(S.jsxs)(f.a.StrictMode,{children:[Object(S.jsx)(k,{}),Object(S.jsx)(x.b,{history:Le,children:Object(S.jsx)(De,{})})]}),document.getElementById("root"))}},[[947,1,2]]]);
//# sourceMappingURL=main.3a301493.chunk.js.map